# LangGraph åŸºç¡€æ•™ç¨‹

è¿™ä¸ªç›®å½•åŒ…å«äº† LangGraph çš„åŸºç¡€ç¤ºä¾‹ï¼Œä»ç®€å•åˆ°å¤æ‚ï¼Œå¸®åŠ©ä½ å¿«é€ŸæŒæ¡ LangGraph çš„æ ¸å¿ƒæ¦‚å¿µã€‚

## ğŸ“š ä»€ä¹ˆæ˜¯ LangGraphï¼Ÿ

LangGraph æ˜¯ä¸€ä¸ªç”¨äºæ„å»º**æœ‰çŠ¶æ€çš„ã€å¤šå‚ä¸è€…çš„ AI åº”ç”¨**çš„æ¡†æ¶ã€‚å®ƒä½¿ç”¨å›¾ç»“æ„æ¥åè°ƒå¤šä¸ª LLM è°ƒç”¨å’Œæ“ä½œï¼Œç‰¹åˆ«é€‚åˆæ„å»ºï¼š

- ğŸ¤– å¤æ‚çš„AI Agent
- ğŸ”„ éœ€è¦å¾ªç¯å’Œæ¡ä»¶é€»è¾‘çš„å·¥ä½œæµ
- ğŸ‘¥ å¤šAgentåä½œç³»ç»Ÿ
- ğŸ’¾ éœ€è¦çŠ¶æ€æŒä¹…åŒ–çš„åº”ç”¨

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

### 1. **StateGraphï¼ˆçŠ¶æ€å›¾ï¼‰**
- èŠ‚ç‚¹(Node)ï¼šä»£è¡¨æ“ä½œå‡½æ•°
- è¾¹(Edge)ï¼šå®šä¹‰æ‰§è¡Œæµç¨‹
- çŠ¶æ€(State)ï¼šåœ¨èŠ‚ç‚¹é—´ä¼ é€’çš„æ•°æ®

### 2. **çŠ¶æ€ç®¡ç†**
```python
from typing import TypedDict

class State(TypedDict):
    input: str
    output: str
```

### 3. **èŠ‚ç‚¹å‡½æ•°**
```python
def my_node(state: State) -> State:
    # å¤„ç†stateå¹¶è¿”å›æ›´æ–°åçš„state
    state['output'] = process(state['input'])
    return state
```

### 4. **è¾¹çš„ç±»å‹**
- **æ™®é€šè¾¹**ï¼šå›ºå®šæµå‘ `add_edge("A", "B")`
- **æ¡ä»¶è¾¹**ï¼šåŠ¨æ€è·¯ç”± `add_conditional_edges(...)`
- **å…¥å£ç‚¹**ï¼š`set_entry_point("start")`
- **ç»“æŸç‚¹**ï¼š`END`

## ğŸ“‚ ç¤ºä¾‹æ–‡ä»¶è¯´æ˜

### 01_simple_chain.py - ç®€å•é“¾å¼è°ƒç”¨ â­
**éš¾åº¦**ï¼šå…¥é—¨

å±•ç¤ºæœ€åŸºç¡€çš„ LangGraph ä½¿ç”¨æ–¹å¼ï¼š
- âœ… å®šä¹‰çŠ¶æ€ç»“æ„ï¼ˆTypedDictï¼‰
- âœ… åˆ›å»ºèŠ‚ç‚¹å‡½æ•°
- âœ… æ„å»ºçº¿æ€§å·¥ä½œæµ
- âœ… è¿è¡Œå›¾å¹¶è·å–ç»“æœ

**é€‚åˆ**ï¼šå®Œå…¨ä¸äº†è§£ LangGraph çš„æ–°æ‰‹

```bash
python 01_simple_chain.py
```

---

### 02_conditional_routing.py - æ¡ä»¶è·¯ç”± â­â­
**éš¾åº¦**ï¼šåˆçº§

æ¼”ç¤ºå¦‚ä½•æ ¹æ®çŠ¶æ€è¿›è¡ŒåŠ¨æ€åˆ†æ”¯ï¼š
- âœ… æ¡ä»¶è·¯ç”±å‡½æ•°
- âœ… `add_conditional_edges` çš„ä½¿ç”¨
- âœ… å¤šåˆ†æ”¯å¤„ç†
- âœ… æƒ…æ„Ÿåˆ†æç¤ºä¾‹

**é€‚åˆ**ï¼šç†è§£äº†åŸºç¡€æ¦‚å¿µï¼Œæƒ³å­¦ä¹ æ¡ä»¶é€»è¾‘

```bash
python 02_conditional_routing.py
```

---

### 03_llm_agent.py - LLM Agent â­â­â­
**éš¾åº¦**ï¼šä¸­çº§

é›†æˆ OpenAI LLM åˆ›å»ºæ™ºèƒ½å¯¹è¯Agentï¼š
- âœ… é›†æˆ LangChain å’Œ OpenAI
- âœ… æ¶ˆæ¯å†å²ç®¡ç†
- âœ… å¯¹è¯å¾ªç¯
- âœ… çŠ¶æ€æŒä¹…åŒ–

**é€‚åˆ**ï¼šæƒ³è¦æ„å»ºå®é™…å¯ç”¨çš„AIå¯¹è¯ç³»ç»Ÿ

**å‰æ**ï¼šéœ€è¦åœ¨ `.env` ä¸­é…ç½® `OPENAI_API_KEY`

```bash
python 03_llm_agent.py
```

---

### 04_multi_agent.py - å¤šAgentåä½œ â­â­â­â­
**éš¾åº¦**ï¼šä¸­é«˜çº§

æ¼”ç¤ºå¤šä¸ª AI Agent ååŒå·¥ä½œï¼š
- âœ… ç ”ç©¶Agentï¼šä¿¡æ¯æ”¶é›†
- âœ… å†™ä½œAgentï¼šå†…å®¹åˆ›ä½œ
- âœ… å®¡æ ¸Agentï¼šè´¨é‡æŠŠæ§
- âœ… Agenté—´æ•°æ®ä¼ é€’

**é€‚åˆ**ï¼šæƒ³è¦æ„å»ºå¤æ‚çš„å¤šAgentç³»ç»Ÿ

**å‰æ**ï¼šéœ€è¦é…ç½® `OPENAI_API_KEY`

```bash
python 04_multi_agent.py
```

---

### 05_with_loops.py - å¾ªç¯å’Œè¿­ä»£ â­â­â­â­
**éš¾åº¦**ï¼šä¸­é«˜çº§

å±•ç¤ºå¦‚ä½•åœ¨å›¾ä¸­ä½¿ç”¨å¾ªç¯ï¼š
- âœ… è¿­ä»£ä¼˜åŒ–æ–‡æœ¬
- âœ… è´¨é‡è¯„ä¼°
- âœ… å¾ªç¯ç»ˆæ­¢æ¡ä»¶
- âœ… æ”¹è¿›å†å²è®°å½•

**é€‚åˆ**ï¼šéœ€è¦å®ç°è¿­ä»£ä¼˜åŒ–çš„åœºæ™¯

**å‰æ**ï¼šéœ€è¦é…ç½® `OPENAI_API_KEY`

```bash
python 05_with_loops.py
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

ä¾èµ–å·²ç»åœ¨é¡¹ç›®çš„ `requirements.txt` ä¸­ï¼ŒåŒ…å«ï¼š
```
langgraph==1.0.2
langchain==1.0.3
langchain-openai==1.0.2
python-dotenv==1.2.1
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ `.env` æ–‡ä»¶ä¸­æ·»åŠ ï¼š
```env
OPENAI_API_KEY=your_api_key_here
```

### 3. è¿è¡Œç¤ºä¾‹

æŒ‰é¡ºåºè¿è¡Œç¤ºä¾‹ï¼Œä»ç®€å•åˆ°å¤æ‚ï¼š

```bash
# 1. åŸºç¡€ç¤ºä¾‹ï¼ˆä¸éœ€è¦API keyï¼‰
python langgraph_basic/01_simple_chain.py
python langgraph_basic/02_conditional_routing.py

# 2. LLMç¤ºä¾‹ï¼ˆéœ€è¦API keyï¼‰
python langgraph_basic/03_llm_agent.py
python langgraph_basic/04_multi_agent.py
python langgraph_basic/05_with_loops.py
```

## ğŸ“ å­¦ä¹ è·¯å¾„

**æ¨èå­¦ä¹ é¡ºåº**ï¼š

```
01_simple_chain.py
  â†“
02_conditional_routing.py
  â†“
03_llm_agent.py
  â†“
04_multi_agent.py â”â”â”â”â”“
  â†“                  â†“
05_with_loops.py  æ„å»ºè‡ªå·±çš„åº”ç”¨
```

## ğŸ’¡ å®è·µé¡¹ç›®å»ºè®®

æŒæ¡è¿™äº›ç¤ºä¾‹åï¼Œå¯ä»¥å°è¯•æ„å»ºï¼š

1. **å®¢æœæœºå™¨äºº**ï¼šä½¿ç”¨æ¡ä»¶è·¯ç”±å¤„ç†ä¸åŒç±»å‹çš„å®¢æˆ·é—®é¢˜
2. **å†…å®¹ç”Ÿæˆå™¨**ï¼šå¤šAgentåä½œï¼ˆç ”ç©¶+å†™ä½œ+ç¼–è¾‘ï¼‰
3. **ä»£ç å®¡æŸ¥åŠ©æ‰‹**ï¼šå¾ªç¯è¿­ä»£ä¼˜åŒ–ä»£ç 
4. **æ™ºèƒ½æ¨èç³»ç»Ÿ**ï¼šæ ¹æ®ç”¨æˆ·åé¦ˆåŠ¨æ€è°ƒæ•´

## ğŸ“– è¿›é˜¶ä¸»é¢˜

- **æŒä¹…åŒ–**ï¼šä½¿ç”¨ `Checkpointer` ä¿å­˜çŠ¶æ€
- **äººæœºååŒ**ï¼š`interrupt` æœºåˆ¶æš‚åœç­‰å¾…äººå·¥è¾“å…¥
- **å­å›¾**ï¼šæ„å»ºå¯å¤ç”¨çš„å›¾æ¨¡å—
- **å¹¶è¡Œæ‰§è¡Œ**ï¼šåŒæ—¶è¿è¡Œå¤šä¸ªèŠ‚ç‚¹
- **æµå¼è¾“å‡º**ï¼šå®æ—¶è¿”å›ä¸­é—´ç»“æœ

## ğŸ”— ç›¸å…³èµ„æº

- [LangGraph å®˜æ–¹æ–‡æ¡£](https://python.langchain.com/docs/langgraph)
- [LangChain æ–‡æ¡£](https://python.langchain.com/)
- [ç¤ºä¾‹åº“](https://github.com/langchain-ai/langgraph/tree/main/examples)

## â“ å¸¸è§é—®é¢˜

### Q: ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ LangGraph vs æ™®é€šçš„ LangChainï¼Ÿ
A: å½“ä½ éœ€è¦ï¼š
- å¤æ‚çš„æ§åˆ¶æµï¼ˆå¾ªç¯ã€æ¡ä»¶ï¼‰
- å¤šæ­¥éª¤å·¥ä½œæµ
- å¤šAgentåä½œ
- çŠ¶æ€ç®¡ç†

### Q: StateGraph å’Œ MessageGraph çš„åŒºåˆ«ï¼Ÿ
A: 
- `StateGraph`ï¼šè‡ªå®šä¹‰çŠ¶æ€ç»“æ„ï¼Œæ›´çµæ´»
- `MessageGraph`ï¼šä¸“é—¨ç”¨äºæ¶ˆæ¯ä¼ é€’ï¼ˆå·²è¢« StateGraph å–ä»£ï¼‰

### Q: å¦‚ä½•è°ƒè¯•LangGraphï¼Ÿ
A:
```python
# å¯è§†åŒ–å›¾ç»“æ„
app.get_graph().print_ascii()

# æŸ¥çœ‹æ‰§è¡Œè¿‡ç¨‹
for step in app.stream(initial_state):
    print(step)
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤é—®é¢˜å’Œæ”¹è¿›å»ºè®®ï¼

---

**Happy Coding!** ğŸ‰
